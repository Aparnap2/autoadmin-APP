appId: host.exp.Exponent
name: "Multi-Agent Orchestration (HTTP-Only)"
tags:
  - critical
  - http-only
  - orchestration
  - integration
env:
  HTTP_ONLY_MODE: "true"
  ENABLE_ORCHESTRATION: "true"
  ORCHESTRATION_TIMEOUT: "60000"
---
# Navigate to dashboard for orchestration
- launchApp
- tapOn:
    text: "Dashboard"

# Verify orchestration system loads
- assertVisible:
    id: "autoadmin-dashboard"
- extendedWaitUntil:
    visible: "Agent Swarm Status"
    timeout: 10000

# Test agent initialization via HTTP
- assertVisible: "CEO Agent: Online"
- assertVisible: "Strategy Agent: Online"
- assertVisible: "DevOps Agent: Online"

# Test coordinated agent task
- tapOn: "Quick Actions"
- tapOn: "Market Analysis"

# Verify task distribution via HTTP
- extendedWaitUntil:
    visible: "Task distributed to agents"
    timeout: 5000

# Wait for multi-agent coordination
- extendedWaitUntil:
    visible: "CEO Agent assigned"
    timeout: 8000
- assertVisible: "Strategy Agent assigned"
- assertVisible: "DevOps Agent assigned"

# Test agent communication via HTTP
- extendedWaitUntil:
    visible: "Agent coordination in progress"
    timeout: 10000

# Verify agent messages flow through HTTP
- assertVisible: "Market data gathered"
- assertVisible: "Analysis completed"
- assertVisible: "Recommendations generated"

# Test task completion
- extendedWaitUntil:
    visible: "Orchestration completed"
    timeout: 20000
- assertVisible: "Multi-agent task successful"

# Test error handling in orchestration
- tapOn: "Quick Actions"
- tapOn: "Code Review"

# Verify error handling in multi-agent context
- extendedWaitUntil:
    visible: "Error handling agents engaged"
    timeout: 8000
- assertVisible: "Error recovery coordinated"

# Test real-time orchestration updates via HTTP streaming
- tapOn: "System Status"
- extendedWaitUntil:
    visible: "Real-time updates"
    timeout: 5000

# Verify HTTP streaming updates work
- assertVisible: "Agent status: Active"
- assertVisible: "Tasks in progress"

# Test orchestration with conflicting tasks
- tapOn: "Quick Actions"
- tapOn: "Performance Audit"
- waitBetween: 1000
- tapOn: "Quick Actions"
- tapOn: "Status Update"

# Verify conflict resolution via HTTP
- extendedWaitUntil:
    visible: "Task prioritization"
    timeout: 8000
- assertVisible: "Conflict resolved"

# Test orchestration load balancing
- repeat:
    times: 5
    commands:
      - tapOn: "Quick Actions"
      - tapOn: "Status Update"
      - waitBetween: 1000

# Verify load balancing works
- assertVisible: "Load balancing active"
- assertVisible: "Tasks distributed evenly"

# Test orchestration persistence
- tapOn: "Quick Actions"
- tapOn: "Clear Conversation History"
- tapOn: "Clear"
- extendedWaitUntil:
    visible: "Orchestration state saved"
    timeout: 5000

# Verify state restoration
- waitBetween: 2000
- assertVisible: "Orchestration state restored"
- assertVisible: "Agent connections maintained"

# Test orchestration performance monitoring
- extendedWaitUntil:
    visible: "Performance metrics"
    timeout: 8000
- assertVisible: "HTTP response time:"
- assertVisible: "Agent response time:"

# Verify performance thresholds met
- assertNotVisible: "Performance degradation"
- assertVisible: "Optimal performance"

# Log successful orchestration test
- evalScript: ${console.log('âœ… Multi-agent orchestration test completed successfully')}

# Take screenshot of final orchestration state
- takeScreenshot: "orchestration-http-only-complete"