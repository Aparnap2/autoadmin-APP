appId: host.exp.Exponent
name: "App Launch & Initialization Flow (HTTP-Only)"
tags:
  - critical
  - smoke
  - http-only
  - authentication
env:
  HTTP_ONLY_MODE: "true"
  DISABLE_WEBSOCKETS: "true"
onFlowStart:
  - runScript: ../utils/clear_app_data.js
---
# App launch and basic initialization
- launchApp

# Verify app loads with HTTP-only mode
- extendedWaitUntil:
    visible: "AutoAdmin Dashboard"
    timeout: 15000

# Verify backend status indicator shows HTTP-only connection
- assertVisible:
    id: "backend-status"
- extendedWaitUntil:
    visible: "Backend"
    timeout: 10000

# Verify HTTP-only indicators
- assertVisible: "No WebSocket connection"
- assertVisible: "HTTP streaming enabled"

# Verify main navigation tabs are loaded
- assertVisible: "Dashboard"
- assertVisible: "Explore"
- assertVisible: "Chat"

# Navigate to dashboard
- tapOn:
    text: "Dashboard"
- assertVisible:
    id: "autoadmin-dashboard"

# Verify dashboard initializes without WebSocket errors
- extendedWaitUntil:
    visible: "System Status"
    timeout: 10000

# Verify agent system initialization
- assertVisible: "Agent Swarm Status"
- extendedWaitUntil:
    visible: "Online"
    timeout: 8000

# Verify no WebSocket-related errors
- assertNotVisible:
    text: "WebSocket connection failed"
- assertNotVisible:
    text: "Reconnecting to WebSocket"

# Verify HTTP streaming capabilities
- assertVisible: "HTTP streaming enabled"
- assertVisible: "SSE fallback ready"

# Log successful HTTP-only initialization
- evalScript: ${console.log('âœ… App launched successfully in HTTP-only mode')}

# Take screenshot for verification
- takeScreenshot: "app-launch-http-only-success"